# KZZCV2.0 项目说明文档

## 项目概述
KZZCV2.0是一个基于LVGL图形库和FreeRTOS实时操作系统的嵌入式GUI项目。该项目采用模块化设计，支持多种硬件平台，提供丰富的用户界面和功能。

## 目录结构
```
src/
├── core/                 # 核心功能模块
│   ├── main.c           # 主程序入口
│   └── tasks.h          # 任务定义和配置
├── ui/                   # 用户界面模块
│   ├── main/            # 主界面
│   ├── settings/        # 设置界面
│   ├── uart/            # 串口界面
│   ├── chart/           # 图表界面
│   ├── usb/             # USB界面
│   └── common/          # 公共UI组件
├── drivers/             # 硬件驱动模块
│   ├── lcd/             # LCD驱动
│   ├── touch/           # 触摸驱动
│   └── adc/             # ADC驱动
├── middleware/          # 中间件模块
│   ├── lvgl/            # LVGL中间件
│   └── usb/             # USB中间件
└── utils/               # 工具模块
    └── malloc/          # 内存管理
```

## 模块说明

### 1. 核心模块 (core)
- **main.c**: 主程序入口，负责系统初始化和任务创建
  - 系统时钟配置
  - 外设初始化
  - FreeRTOS任务创建
  - 系统调度启动
- **tasks.h**: 任务定义和配置
  - 任务优先级定义
  - 任务栈大小配置
  - 任务句柄声明
  - 队列句柄声明

### 2. 用户界面模块 (ui)
- **main_ui**: 主界面模块
  - 主界面布局
  - 状态栏显示
  - 导航按钮
  - 时间日期显示
- **settings_ui**: 设置界面模块
  - 系统信息显示
  - 硬件信息显示
  - 软件信息显示
  - 关于信息显示
- **uart_ui**: 串口界面模块
  - 串口参数配置
  - 数据收发显示
  - 数据格式设置
  - 波特率设置
- **chart_ui**: 图表界面模块
  - 温度曲线显示
  - 柱状图显示
  - 数据缩放控制
  - 数据清除功能
- **usb_ui**: USB界面模块
  - USB连接状态显示
  - USB数据传输
  - USB设备管理

### 3. 驱动模块 (drivers)
- **lcd**: LCD驱动模块
  - LCD初始化
  - 显示缓冲区管理
  - 显示刷新控制
  - 显示区域设置
- **touch**: 触摸驱动模块
  - 触摸初始化
  - 触摸数据读取
  - 触摸事件处理
  - 触摸坐标转换
- **adc**: ADC驱动模块
  - ADC初始化
  - 数据采集控制
  - 温度计算
  - 数据转换

### 4. 中间件模块 (middleware)
- **lvgl**: LVGL中间件
  - LVGL初始化
  - 显示设备管理
  - 输入设备管理
  - 定时器管理
- **usb**: USB中间件
  - USB设备初始化
  - 数据传输管理
  - 设备状态监控
  - 中断处理

### 5. 工具模块 (utils)
- **malloc**: 内存管理模块
  - 内存池管理
  - 内存分配
  - 内存释放
  - 内存使用统计

## 框架说明

### 1. LVGL图形库
- 版本要求：LVGL 8.x
- 功能特性：
  - 丰富的UI组件
  - 支持动画效果
  - 支持主题定制
  - 支持多语言
  - 支持触摸输入
  - 支持键盘输入

### 2. FreeRTOS实时操作系统
- 版本要求：FreeRTOS 10.x
- 功能特性：
  - 任务管理
  - 内存管理
  - 队列管理
  - 信号量管理
  - 定时器管理
  - 中断管理

## 硬件要求

### 1. 推荐MCU型号
- STM32F4系列
  - STM32F407ZGT6
  - STM32F429ZIT6
  - STM32F469ZIT6
- STM32H7系列
  - STM32H743ZIT6
  - STM32H750ZBT6

### 2. 性能要求
- CPU主频：≥168MHz
- RAM：≥128KB
- Flash：≥512KB
- 外部RAM：≥8MB（可选）

### 3. 外设要求
- LCD接口：RGB/8080/SPI
- 触摸接口：I2C/SPI
- USB接口：USB 2.0 Full Speed
- ADC：12位分辨率
- UART：至少2个

### 4. 显示要求
- 分辨率：≥480x320
- 色深：≥16位
- 刷新率：≥60Hz
- 触摸：支持多点触控

## 编译和运行

### 1. 开发环境
- IDE：Keil MDK 5.x
- 编译器：ARMCC 5.x
- 调试器：ST-Link V2

### 2. 编译步骤
1. 打开项目工程文件
2. 配置目标MCU型号
3. 配置编译选项
4. 编译项目
5. 下载程序

### 3. 运行要求
- 确保硬件连接正确
- 确保电源供应稳定
- 确保调试器连接正常
- 确保LCD和触摸屏工作正常

## 注意事项
1. 首次使用需要配置系统时钟
2. 需要正确配置外设引脚
3. 需要正确配置中断优先级
4. 需要正确配置FreeRTOS参数
5. 需要正确配置LVGL参数

## 维护和更新
1. 定期检查代码更新
2. 定期更新依赖库
3. 定期进行代码优化
4. 定期进行性能测试
5. 定期进行稳定性测试